$(function(){function t(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=c,a=moment(t.start_date,"YYYY-MM-DD HH:mm:ss"),i=moment(t.end_date,"YYYY-MM-DD HH:mm:ss"),s="".concat(e,"/_").concat(t.id_event),r=a.format("HH:mm")+" - "+i.format("HH:mm"),l=t.has_multiple_schedules;if(t.custom_url&&(s=t.custom_url),l&&t.schedules.length>1){var m=t.schedules,u="";m.forEach(function(t){var n=moment(t.start_date,"YYYY-MM-DD HH:mm:ss"),e=moment(t.end_date,"YYYY-MM-DD HH:mm:ss");n.format("D MMM YYYY")==e.format("D MMM YYYY")?u+="".concat(n.format("D MMM YYYY"),", ").concat(n.format("HH:mm")," - ").concat(e.format("HH:mm"),"<br>"):u+="".concat(n.format("D MMM YYYY"),", ").concat(n.format("HH:mm")," - ").concat(e.format("D MMM YYYY"),", ").concat(e.format("HH:mm"),"<br>")}),r='\n      <span class="text-orange schedule-time uk-position-relative" type="button"> \n        Lihat waktu\n        <div class="uk-padding-small info-tooltip">'.concat(u,"</div>\n      </span>\n      \n      ")}var d='<div class="uk-width-1-3@m uk-width-1-1">\n    <a class="card-event uk-link-reset" href="'.concat(s,'" target="_blank">\n\t\t\t<div class="banner-thumb uk-inline-clip">\n\t\t\t\t<img class="uk-transition-scale-up uk-transition-opaque" src="').concat(t.event_banner,'" onerror="this.src=\'').concat(o,'\';">\n\t\t\t</div>\n      <div class="card-event-body">\n        <h4 class="event-title" title=\'').concat(t.event_name,"'>").concat(t.event_name,'</h4>\n\t\t\t\t\n\t\t\t\t<div class="event-details">\n\t\t\t\t<span class="detail-name">Tanggal &amp; Waktu</span>\n\t\t\t\t<span class="detail-value"><i class="fa fa-calendar"></i>\n\t\t\t\t').concat(a.format("D MMM YYYY")," - ").concat(i.format("D MMM YYYY"),'\n\t\t\t\t</span>\n\t\t\t\t<span class="detail-value"><i class="fa fa-clock-o"></i>\n\t\t\t\t').concat(r,' \n\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="event-details">\n\t\t\t\t<span class="detail-name">Venue &amp; Lokasi</span>\n\t\t\t\t<span class="detail-value"><i class="fa fa-map-marker"></i>').concat(t.location_name,", ").concat(t.district,"</span>\n\t\t\t\t</div>\n\t\t\t</div>\n      </a>\n    </div>");""==n?$(".event-content").find("li.uk-active").find(".uk-grid").append(d):$(n).append(d)}function n(){var n=$(".event-content").find("li.uk-active"),e=$(n).attr("data-cat-id"),a=$(n).attr("data-cat-name"),c=$(n).attr("data-page");return $(".uk-active .card-event").length>9?$(".list-category-sticky").attr("uk-sticky","offset:80; bottom: #column-event-category;"):$(".list-category-sticky").removeAttr("uk-sticky"),void 0===$(n).attr("data-maximal")&&((void 0===s[e]||1!=s[e])&&(s[e]=!0,$(n).find("div.event-loader").addClass("active"),void 0===a&&""==a||window.history.pushState("","","".concat(i,"/").concat(a)),1==c&&($(".list-category-sticky").removeAttr("uk-sticky"),$("html, body").animate({scrollTop:$(".uk-section.section-border-bottom").offset().top},1e3)),void $.getJSON(i,{category_name:a,page:c},function(a){if(s[e]=!1,1==c&&(a.event.length>9?$(".list-category-sticky").attr("uk-sticky","offset:80; bottom: #column-event-category;"):$(".list-category-sticky").removeAttr("uk-sticky")),c++,$(n).attr("data-page",c),a.event.map(function(n){t(n)}),$(n).find("div.event-loader").removeClass("active"),a.event.length<1)return $(n).attr("data-maximal","xyz"),2==c&&$(".event-content").find("li.uk-active").find(".uk-grid").html('<p class="uk-text">Tidak ada event untuk kategori ini.</p>'),!1})))}function e(){if(r.event_name.length>0&&$("#search-icon-clear").css("display","inline-flex"),r.is_loading)return!1;if(r.notifElement&&r.notifElement.close(),0==r.event_name.length)return!1;if(r.event_name.length<3){return r.notifElement=UIkit.notification({message:'<div class="uk-text-center uk-text-small">Minimal kata kunci pencarian 3 karakter.</div>'}),!1}r.is_loading=!0,$("#searching_process .spinner").show(),$("#searching_process button").hide(),r.event_name!=r.last_keyword?($("#search-not-found").hide(),r.paging=1,$("#search_result").html(""),r.last_keyword=r.event_name):r.paging=r.paging+1,$("#txtDiscoverSearch").attr("data-page",r.paging),r.xhr=$.getJSON(i,{event_name:r.event_name,page:r.paging},function(n){if(r.page_count=n.summary.page_count,$("#search_result_count").text(n.summary.event_count),n.event.map(function(n){t(n,"#search_result")}),n.event.length<=n.summary.event_count&&r.paging>=n.summary.page_count?$("#searching_process button").hide():$("#searching_process button").show(),$("#searching_process .spinner").hide(),r.is_loading=!1,n.event.length<1&&1==r.paging)return $("#txtDiscoverSearch").attr("data-page",r.paging),$("#search_result").html(""),$("#search-not-found").show(),$("#searching_process button").hide(),!1})}function a(){$("#txtDiscoverSearch").val(""),$("#search-not-found").hide(),$("#search_result").html(""),$("#search_result_count").text("0"),$("#search-icon-clear").hide(),r={process:null,last_keyword:"",paging:1,event_name:"",notifElement:null,is_loading:!1,page_count:1,xhr:null},r.xhr&&r.xhr.abort()}var c="/event",i="/category",o="../../images/banner-event.jpg",s=[];UIkit.util.on(".uk-switcher","shown",function(){n()}),$(window).scroll(function(){"/event"!=window.location.pathname&&"/lebaran"!=window.location.pathname&&$(window).scrollTop()>=$(document).height()-$(window).height()-400&&n()}),$("#search_result_panel").scroll(function(){if($(this).scrollTop()>=$(this).height()-500){if(r.paging>=r.page_count)return!1;e()}}),$("#searching_process button").on("click",function(){return r.paging>=r.page_count?$("#searching_process button").hide():e(),!1});var r={process:null,last_keyword:"",paging:1,event_name:"",notifElement:null,is_loading:!1,page_count:1,xhr:null};$("#txtDiscoverSearch").on("keyup",function(){clearTimeout(r.process),r.event_name=$(this).val().trim(),r.process=setTimeout(function(){e()},800)}),$("#search-icon-clear").on("click",function(){a()}),$("#search-modal").on("show",function(){$("html, body").animate({scrollTop:0},"slow"),$(".main-nav").addClass("search-nav-transparent"),$("#txtDiscoverSearch").focus(),a()}),$("#search-modal").on("hide",function(){r.is_loading=!1,r.xhr&&r.xhr.abort(),$(".main-nav").removeClass("search-nav-transparent")})}),$(".search-bar-input, .search-button-icon").click(function(){UIkit.modal("#search-modal").show()});