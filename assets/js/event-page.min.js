function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function formatShortDate(t){return moment(t,"YYYY-MM-DD h:mm:ss").format("DD MMM YYYY")}function formatLongDate(t){return moment(t,"YYYY-MM-DD h:mm:ss").format("DD MMMM YYYY")}function formatTime(t){return moment(t,"YYYY-MM-DD h:mm:ss").format("HH:mm")}function showError(t){var e='<div class="uk-text-small uk-grid-small" uk-grid>\n    <div class="uk-width-auto">\n      <span class="fa fa-exclamation-circle" />\n    </div>\n    <div class="uk-width-expand">'.concat(t,"</div>\n  </div>");null!=notificationElement&&notificationElement.close(),notificationElement=UIkit.notification(e,{status:"danger",timeout:3e3})}function successMessage(t){var e='<div class="uk-text-small uk-grid-small" uk-grid>\n        <div class="uk-width-auto"><span class="fa fa-check-circle"></span></div>\n        <div class="uk-width-expand">'.concat(t,"</div>\n      </div>");null!=notificationElement&&notificationElement.close(),notificationElement=UIkit.notification(e,{status:"success",timeout:3e3})}function copyToClipboard(t){var e=$("<input>");$("body").append(e),e.val($(t).text()).select(),document.execCommand("copy"),e.remove();var i=UIkit.notification('<div class="uk-text-center uk-text-small">\n        <span style="margin-right: 10px;" uk-icon="icon: check"></span>Copied to your clipboard!\n      </div>',{status:"success"});setTimeout(function(){i.close()},1500)}function showLoading(){$("#qr-code-section .qr-column").css("opacity",0),$("#loading-qr").show()}function hideLoading(){$("#qr-code-section .qr-column").css("opacity",1),$("#loading-qr").hide()}function strLimit(t,e){var i=t.split(" "),n="",o=!0;return i.forEach(function(t,i){0===i?n=t:n.length+t.length+1<=e?n+=" "+t:!0===o&&(n+="...",o=!1)}),n}$(document).ready(function(){function t(t,e){e=e||"Click - Default";var i={};h.event=t,a[0]&&l[0]&&0==s&&(u.each(function(t,n){var o=$(this).val();i={id:o,name:$("#ticket-type-".concat(o)).val(),price:$("#ticket-price-".concat(o)).val(),brand:r.text(),category:d.text(),position:t+1},h.ecommerce.click.actionField.list=e,h.ecommerce.click.products.push(i)}),s+=1,dataLayer.push(h))}function e(t){if(401===t.status)return void(window.location="/");if(404===t.status)return void(window.location="/404");if(0==t.status.toString().indexOf("4")){var e=t.responseJSON.result;"string"==typeof e.error_message?showError(e.error_message):"string"==typeof e.error_messages?showError(e.error_messages):"object"==_typeof(e.error_messages)&&showError(e.error_messages[Object.keys(e.error_messages)[0]])}else showError("Terjadi kesalahan di server")}function i(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}function n(){var t=0;return $(".ticket-qty-input").each(function(){t+=+$(this).val()}),t}function o(){var t=$("#enterprise-filter-date").val(),e=$("#enterprise-filter-time").val();$("#enterprise-ticket-list ul li").each(function(i,n){$(n).show(),""!=t&&"-"!=e?$(n).attr("data-date")==t&&$(n).attr("data-time")==e?$(n).show():$(n).hide():""!=t&&"-"==e?$(n).attr("data-date")==t?$(n).show():$(n).hide():""==t&&"-"!=e&&($(n).attr("data-time")==e?$(n).show():$(n).hide())})}startDate=$("#start-date").val(),endDate=$("#end-date").val(),idEvent=$("#id-event").val(),idInvoice=$("#id-invoice").val(),invoiceCode=$("#invoice-code").val(),notificationElement=null,isProcessing=!1;var a=$(".event-page"),c=$("#gt-event-name"),r=$("#gt-org-name"),s=0,l=$("#gt-kategori-tiket"),d=$("#gt-kategori-name"),u=$(".id-ticket"),m={ecommerce:{detail:{actionField:{list:"View Event Page"},products:[{id:idEvent,name:c.text(),brand:r.text(),category:d.text()}]}}},h={event:"",ecommerce:{currencyCode:"IDR",click:{actionField:{list:""},products:[]}},dlvUserAgent:window.navigator.userAgent},f={event:"addToCartBeliTiket",ecommerce:{currencyCode:"IDR",add:{actionField:{list:c.text()},products:[]}}};window.location.pathname===function(t,e){return("string"!=typeof t||!t instanceof String)&&(t=t.toString()),("string"!=typeof e||!e instanceof String)&&(e=e.toString()),"/event/"+t.replace(/\s+/g,"-").toLowerCase()+"_"+e}(c.text(),idEvent)&&dataLayer.push(m),l.on("click",function(){t("viewEventByKategoriTiket","Click - Kategori Tiket")}),$(".formated-price").each(function(){var t=$(this).text(),e=i(+t);$(this).html("<b>Rp ".concat(e,"</b>"))}),eventDate=formatShortDate(startDate)+" - "+formatShortDate(endDate),$("#date-event").append(eventDate),S=formatTime(startDate)+" - "+formatTime(endDate)+" WIB",$("#time-event").append(S),$(".end-sale").each(function(){endSale=$(this).text(),formated=formatLongDate(endSale)+" | "+formatTime(endSale),$(this).text(formated)}),$(".ticket-qty").click(function(){var t=+$(this).html(),e=$(this).attr("ticket-id"),i=+$("#ticket-qty-".concat(e)).val();n()-i+t>5?(showError("Maksimal pembelian tiket dalam 1 transaksi adalah 5 tiket"),$("#ticket-qty-".concat(e)).val(i).change()):$("#ticket-qty-".concat(e)).val(t).change()}),$(".btn-add").click(function(){var t=$(this).attr("ticket-id"),e=+$("#ticket-qty-".concat(t)).val()+1,i=+$("#max-buy-ticket-".concat(t)).val();if(n()>=i)return showError("Maksimal pembelian tiket dalam 1 transaksi adalah ".concat(i," tiket")),!1;e<i+1?$("#ticket-qty-".concat(t)).val(e).change():e<=5?($("#ticket-qty-".concat(t)).val(i).change(),showError("Jumlah tiket yang kamu pilih tidak tersedia.")):showError("Maksimal pembelian tiket adalah ".concat(i," tiket"))}),$(".btn-min").click(function(){var t=$(this).attr("ticket-id"),e=+$("#ticket-qty-".concat(t)).val()-1;e>=0&&$("#ticket-qty-".concat(t)).val(e).change()});var v=[];if($(".ticket-qty-input").on("change",function(){var t=0,e=$(this).attr("ticket-id"),n=$("#ticket-price-".concat(e)).val(),o=$("#ticket-type-".concat(e)).val(),a=+$(this).val(),c=v.findIndex(function(t){return t.id===e}),r={id:e,price:n,ticketType:o,qty:a},s=v.find(function(t){return t.id==e});0==r.qty?v.splice(c,1):s?v.splice(c,1,r):v.push(r);var l=[],d=0;v.forEach(function(e){var i="".concat(e.ticketType," <b>").concat(e.qty," Tiket</b>");t+=e.qty*e.price,l.push(i),d+=e.qty});var u=l.join(" | ");$("#qty-mobile").html(d),""!==u?$("#cart-ticket-name").html(u):$("#cart-ticket-name").html("Kamu belum memilih tiket");var m=i(t);$("#sub-total-price").html(m)}),$("#order-ticket").click(function(){if(1==isProcessing)return!1;if($("html, body").animate({scrollTop:$(".uk-tab .uk-active").offset().top},1e3),$(".uk-tab .uk-active").text().indexOf("Des")>-1)return UIkit.tab($("#event-details")).show(1),t("viewEventByBeliTiket","Click - Beli Tiket"),!1;var i=[],n={};$(".id-ticket").each(function(t){var e=$(this).val(),o=$("#ticket-qty-".concat(e)).val(),a=$("#ticket-type-".concat(e)).val(),c=$("#ticket-price-".concat(e)).val();o&&"0"!==o&&(i.push({qty:+o,id_ticket:+e}),n={id:e,name:a,price:c*o,quantity:o,brand:r.text(),category:d.text(),position:t+1},f.ecommerce.add.products.push(n))}),0!==i.length?(isProcessing=!0,$(this).html('<div class="spinner-button">\n                <div class="bounce1"></div>\n                <div class="bounce2"></div>\n                <div class="bounce3"></div>\n              </div>'),$.ajax({method:"POST",url:"/api/events/".concat(idEvent,"/order/book-tickets"),data:{tickets:i}}).done(function(t){dataLayer.push(f),isProcessing=!1,t.status&&(window.location.href="/event/".concat(idEvent,"/personal-information"),$("#order-ticket").html("PESAN TIKET"))}).fail(function(t){isProcessing=!1,e(t),$("#order-ticket").html("PESAN TIKET")})):showError("Pilih minimal 1 tiket")}),0!==$("#list-payment-id").length){var p=function(t,i,n){$.ajax({method:"GET",url:"/api/events/".concat(i,"/order/detail?id_list_payment=").concat(t)}).done(function(t){t.status&&n(t)}).fail(function(t){e(t),n(t)})};invoice_fee=0,totalInvoice=+$("#invoice-total").val()+invoice_fee,formated=i(totalInvoice),$("#total-price").html("Rp "+formated),$("#convenience-fee").html("<b>Rp ".concat(i(invoice_fee),"</b>")),$("#list-payment-id").change(function(){id=$("input[name='payment-method']:checked").val(),fee=$("#fee-".concat(id)).val(),invoice_fee=1e3,p(id,idEvent,function(t){if(t.status){var e=t.result.invoice.invoice_payment_total;invoice_fee=t.result.invoice.invoice_fee,formated=i(invoice_fee),$("#invoice-total-payment").val(e),$("#invoice-total").val(e),$("#total-price").html("Rp "+i(e)),$("#convenience-fee").html("<b>Rp ".concat(formated,"</b>"))}}),formated=i(invoice_fee),totalInvoice=+$("#invoice-total").val(),$(".how-to").hide(),$("#how-to-".concat(id)).show(),$("#convenience-fee").html("<b>Rp ".concat(formated,"</b>"))})}if(0!==$("#personal-information").length){var k=function(){$("#input-name").val().length<5?($("#error-name").attr("title","Minimal 5 karakter").show(500,function(){UIkit.tooltip(this).show()}),E=!0):$("#error-name").hide()},y=function(){var t=$("#input-email").val();/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())?$("#error-email").hide():($("#error-email").attr("title","Email tidak valid").show(500,function(){UIkit.tooltip(this).show()}),_=!0)},g=function(t){return 8!=t.which&&0!=t.which&&(t.which<48||t.which>57)?($("#error-phone").attr("title","input only number").show(500,function(){UIkit.tooltip(this).show()}),!1):($("#error-phone").hide(),!0)},w=function(){var t=$("#input-phone").val(),e=/^[0-9]{5,13}$/im,i=e.test(String(t).toLowerCase());t.length<5?($("#error-phone").attr("title","Nomor handphone minimal 5 karakter").show(500,function(){UIkit.tooltip(this).show()}),x=!0):i?$("#error-phone").hide():($("#error-phone").attr("title","Nomor handphone tidak valid").show(500,function(){UIkit.tooltip(this).show()}),x=!0)},b=function(){var t=$('input[name="payment-method"]:checked').val(),e=+$("#invoice-total").val();t||0===e?$("#error-payment-id").hide():($("#error-payment-id").text("Metode pembayaran harus dipilih").show(),D=!0)},E=!1,_=!1,x=!1,D=!1;$("#error-name").hide(),$("#error-email").hide(),$("#error-phone").hide(),$("#error-payment-id").hide(),$("#input-name").focusout(function(){k()}),$("#input-email").focusout(function(){y()}),$("#input-phone").focusout(function(){w()}),$("#input-phone").keypress(function(t){if(g(t),!g(t))return!1}),$("input[name='payment-method']").change(function(){""!==$(this).val()&&$("#error-payment-id").hide()}),$.getJSON("/js/data/country_dial_info.json",function(t){var e="";$(t).each(function(t,i){var n="";"+62"==i.dial_code&&(n="selected"),e="<option value='".concat(i.dial_code,"' ").concat(n,">").concat(i.flag," ").concat(i.dial_code,"</option>"),$("#country_code").append(e)})}),$("#personal-information").on("submit",function(){E=!1,_=!1,x=!1,D=!1;var t=!validationForm();if(b(),w(),y(),k(),0==E&&0==_&&0==x&&0==D&&0==t){if(1==isProcessing)return!1;isProcessing=!0;var i=$("#country_code").val()+$("#input-phone").val(),n=$("#input-name").val(),o=$("#input-email").val(),a=$("#receive_wa_notif").is(":checked")?"1":"0",c=$('input[name="payment-method"]:checked').val(),r=+$("#invoice-total-payment").val();c="free"==c?"free":+c;var s={firstname:n,email:o,telephone:i,id_list_payment:c,price_total:r,send_email:"yes",receive_wa_notif:a};s=submitCustomForm(form,idAttendees,s),6==c?(localStorage.setItem("personalInformation",JSON.stringify(s)),window.location="/event/".concat(idEvent,"/input-credit-card")):(gtmDataLayer.ecommerce.checkout.actionField.option=$(".payment-name[name=".concat(c,"]")).val(),$("#confirm-payment").html('<div class="spinner-button">\n              <div class="bounce1"></div>\n              <div class="bounce2"></div>\n              <div class="bounce3"></div>\n            </div>'),$.ajax({method:"POST",url:"/api/events/".concat(idEvent,"/order/confirm"),data:s}).done(function(t){dataLayer.push(gtmDataLayer),window.location.href="/invoice/".concat(idInvoice),$("#confirm-payment").html("DONE"),isProcessing=!1}).fail(function(t){$("#confirm-payment").html("BAYAR TIKET"),"404"==t.responseJSON.result.error_code&&idInvoice?window.location.href="/invoice/".concat(idInvoice):e(t),isProcessing=!1})),isProcessing=!1}else showError("Silahkan cek kelengkapan datamu.");return!1})}var Y=$("#expired-time").val(),T=$("#expired-seconds").val(),I=moment(Y,"YYYY-MM-DD HH:mm:ss").valueOf(),S=I,q=$("#custom-url").val(),M=moment(Y,"YYYY-MM-DD HH:mm:ss").subtract(T,"seconds").valueOf(),C=S-M,P=moment.duration(C,"milliseconds");C<=0?(window.location.href=q,showError("Waktu kamu telah habis.")):setInterval(function(){P=moment.duration(P-1e3,"milliseconds"),P.hours()>=10?$("#hour").html(P.hours()):$("#hour").html("0"+P.hours()),P.minutes()>=10?$("#minute").html(P.minutes()):$("#minute").html("0"+P.minutes()),P.seconds()>=10?$("#second").html(P.seconds()):$("#second").html("0"+P.seconds()),P.hours()<=0&&P.minutes()<=0&&P.seconds()<=0&&(window.location.href=q,showError("Waktu kamu telah habis."))},1e3);var L=$("#payment-number").html(),O="";L&&L.split("").forEach(function(t,e){O+=e%4==0?" "+t:t}),$("#payment-number").html(O),$("#tnc-detail").css("margin-bottom",$(".footer-action").height()-30+"px"),null!=document.getElementById("enterprise-filter-date")&&$("#enterprise-filter-date").daterangepicker({singleDatePicker:!0,cancelClass:"uk-button rounded-button uk-margin-small-bottom uk-box-shadow-small primary-color",applyClass:"uk-button uk-button-primary rounded-button uk-margin-small-bottom uk-box-shadow-small uk-margin-small-right ",autoUpdateInput:!1,locale:{format:"DD MMM YYYY"}}),$("#enterprise-filter-date").on("apply.daterangepicker",function(t,e){$(this).val(e.startDate.format(e.locale.format)),o()}),$("#enterprise-filter-date").on("cancel.daterangepicker",function(t,e){$(this).val(""),o()}),$("#enterprise-filter-time").on("change",function(){return o(),!1}),$("#enterprise-filter-reset").on("click",function(){return $("#enterprise-filter-date").val(""),$("#enterprise-filter-time").val("-"),o(),!1}),$("#enterprise-ticket-list li").on("click",function(){$(this).toggleClass("active"),$(this).find(".ticket-detail").slideToggle()}),$("#choose-schedule").on("click",function(){return $(".uk-tab .uk-active").text().indexOf("Des")>-1&&($(this).hide(),$(".footer-action").addClass("uk-visible@s"),UIkit.tab($("#event-details")).show(1),$("html, body").animate({scrollTop:$(".uk-tab .uk-active").offset().top},1e3),!1)}),$(".enterprise-tab").on("click",function(){$("#choose-schedule").show(),$(".footer-action").removeClass("uk-visible@s")}),$(".hide-enterprise-multi").on("click",function(){$("html, body").animate({scrollTop:$(".uk-tab .uk-active").offset().top},1e3),$("#choose-schedule").hide(),$(".footer-action").addClass("uk-visible@s")})}),$("#check-payment").click(function(){invoiceCode=$("#invoice-code").val();var t=$("#id-invoice").val(),e="/api/invoice/".concat(t,"/status");showLoading(),$.ajax({method:"GET",url:e}).done(function(t){2==t.result.status?showError("Maaf, kamu belum melakukan pembayaran!"):(successMessage("Pembayaran sukses!"),$("#evoucher-link").attr("href",t.result.evoucher_url),$("#section-gopay-success").removeClass("uk-hidden"),$("#countdown-gopay").html(""),$("#title-thankyou").html("Terima kasih atas pesanan kamu"),$("#qr-code-section .qr-column").hide()),hideLoading()}).fail(function(t){hideLoading()})}),document.getElementById("floating-name")&&$(window).scroll(function(){$(window).scrollTop()>$("h2").offset().top?$("#floating-name").addClass("snap"):$("#floating-name").removeClass("snap")});